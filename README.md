# 🐎 2026 丙午馬年・媽祖靈感開壇 抽獎系統

> 結合五行命理的廟會風格互動抽獎 Web App，基於 React 19 + Vite + Framer Motion 打造。

---

## 功能特色

- **四輪完整抽獎流程**，每輪獨立主題與獎項
- **五行命理引擎**：根據姓名筆畫與出生年份天干地支進行加權排序，增加神秘感
- **鑑定語系統**：每位中獎者獲得專屬命理鑑定文，依輪次分為 8 種模板，每輪主題不同
- **逐一揭曉動畫**：中獎者一位一位以卡牌翻轉效果揭曉，附鼓聲滾動過場
- **CSV 匯入支援**：可直接匯入 Excel 另存的 `.csv` 檔案作為參加者名單
- **雙名單系統**：第一、二輪與第三、四輪可使用不同名單
- **廟會風格 UI**：火焰粒子背景、賽馬奔跑動畫、金色主題設計

---

## 抽獎輪次說明

| 輪次 | 名稱 | 預設人數 | 名單來源 | 主題 |
|------|------|----------|----------|------|
| 第一輪 | 🔥 離火微光・五行補運獎 | 10 名 | 全體名單一 | 五行補運 |
| 第二輪 | 🙏 神光普照・天后契子獎 | 12 名 | 第一輪未中獎者 | 天后契子 |
| 第三輪 | 🏆 丙午金匱・赤馬銜金獎 | 1 名 | 全體名單二（重置）| 赤馬銜金 |
| 第四輪 | 🌟 水火既濟・特別獎 | 1 名 | 名單二排除第三輪得主 | 水火既濟 |

---

## 技術架構

```
src/
├── App.jsx                  # 主路由：設定畫面 ↔ 抽獎畫面
├── components/
│   ├── SetupScreen.jsx      # 設定畫面（名單輸入、CSV 匯入、輪次設定）
│   ├── LotteryScreen.jsx    # 抽獎主畫面（滾動鼓、逐一揭曉）
│   ├── WinnerDisplay.jsx    # 得獎卡片與彩帶特效
│   └── BackgroundDecorations.jsx  # 火焰粒子、奔馬動畫背景
├── data/
│   └── lotteryData.js       # 五行引擎、命理鑑定語、抽獎邏輯、ROUND_CONFIGS
└── styles/
    └── main.scss            # 全站樣式（Noto Serif TC、金色廟會主題）
```

**依賴套件：**

| 套件 | 用途 |
|------|------|
| React 19 | UI 框架 |
| Vite 7 | 建置工具 |
| Framer Motion 12 | 動畫（卡牌翻轉、淡入淡出、彈簧動畫）|
| SASS | 樣式預處理器 |
| Lucide React | 圖示 |

---

## 本地開發

```bash
# 安裝依賴
npm install

# 啟動開發伺服器（http://localhost:5173）
npm run dev

# 正式建置
npm run build

# 預覽建置結果
npm run preview
```

---

## 名單格式

每行一人，格式為 `姓名,生日(YYYY-MM-DD)`，生日為選填：

```
王大明,1990-05-20
李小花,1985-12-03
張志豪
```

### CSV 匯入

點選「📂 匯入 CSV 檔」按鈕，支援：
- Excel 另存新檔的 `.csv`（含 BOM 自動移除）
- 自動偵測並跳過標題列
- 自動解析 `YYYY-MM-DD` 或 `YYYY/MM/DD` 格式的生日欄位

---

## 命理計算邏輯

以 **1984 甲子年** 為天干地支基準：

- **天干**：`(year − 1984) % 10` → 甲乙丙丁戊己庚辛壬癸
- **地支**：`(year − 1984) % 12` → 子丑寅卯辰巳午未申酉戌亥
- **姓名五行**：總筆畫尾數 1–2 木 / 3–4 火 / 5–6 土 / 7–8 金 / 9–0 水
- **2026 親和度**：火 100 > 木 90 > 土 80 > 金 50 > 水 40

抽獎權重 = 姓名五行 × 50% + 生日命格 × 20% + 隨機值 × 30%

---

## 靜態資源

| 路徑 | 說明 |
|------|------|
| `public/images/horse.png` | 奔馬動畫圖（建議使用 PNG 透明背景）|
| `public/favicon.ico` | 網頁圖示 |

